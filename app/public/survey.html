<!DOCTYPE html>
<html>
<head>
	<title>Friend Finder Survey</title>

	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
	<script src="https://code.jquery.com/jquery.js"></script>
  	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
</head>
<body>
<div class = "container">
<h2>Survey Questions</h2>
<hr>
<form role="form" id="friendform">
<h3><b>About You</b></h3>
<h4>Name(Required)</h4>
<input type = "text" id="name" class="form-control" placeholder="Your Name">
<br>
<h4>Link to Photo Image (Required)</h4>
<!-- <br> -->
<input type = "url" id="photo" class="form-control" placeholder="http://yourphotowebsite.com">
<hr>

<h3><b>Question 1</b></h3>
<h4>You like to be outdoors when possible.</h4>
<select class="chosen-select" id="q1" data-placeholder="Choose an option">
	<option value=""></option>
	<option value=1>1 (Strongly Agree)</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5 (Strongly Disagree)</option>
</select>
<h3><b>Question 2</b></h3>
<h4>You enjoy trying new things.</h4>
<select class="chosen-select" id="q2" data-placeholder="Choose an option">
	<option value=""></option>
	<option value=1>1 (Strongly Agree)</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5 (Strongly Disagree)</option>
</select>
<h3><b>Question 3</b></h3>
<h4>It is difficult to keep your mind in the present.</h4>
<select class="chosen-select" id="q3" data-placeholder="Choose an option">
	<option value=""></option>
	<option value=1>1 (Strongly Agree)</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5 (Strongly Disagree)</option>
</select>
<h3><b>Question 4</b></h3>
<h4>You value open and honest communication.</h4>
<select class="chosen-select" id="q4" data-placeholder="Choose an option">
	<option value=""></option>
	<option value=1>1 (Strongly Agree)</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5 (Strongly Disagree)</option>
</select>
<h3><b>Question 5</b></h3>
<h4>Dogs are better than cats.</h4>
<select class="chosen-select" id="q5" data-placeholder="Choose an option">
	<option value=""></option>
	<option value=1>1 (Strongly Agree)</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5 (Strongly Disagree)</option>
</select>
<h3><b>Question 6</b></h3>
<h4>There is humor in most anything.</h4>
<select class="chosen-select" id="q6" data-placeholder="Choose an option">
	<option value=""></option>
	<option value=1>1 (Strongly Agree)</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5 (Strongly Disagree)</option>
</select>
<h3><b>Question 7</b></h3>
<h4>Music is important in your life.</h4>
<select class="chosen-select" id="q7" data-placeholder="Choose an option">
	<option value=""></option>
	<option value=1>1 (Strongly Agree)</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5 (Strongly Disagree)</option>
</select>
<h3><b>Question 8</b></h3>
<h4>It takes time to come out of your shell in social situations.</h4>
<select class="chosen-select" id="q8" data-placeholder="Choose an option">
	<option value=""></option>
	<option value=1>1 (Strongly Agree)</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5 (Strongly Disagree)</option>
</select>
<h3><b>Question 9</b></h3>
<h4>You enjoy traveling.</h4>
<select class="chosen-select" id="q9" data-placeholder="Choose an option">
	<option value=""></option>
	<option value=1>1 (Strongly Agree)</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5 (Strongly Disagree)</option>
</select>
<h3><b>Question 10</b></h3>
<h4>You are easily stressed.</h4>
<select class="chosen-select" id="q10" data-placeholder="Choose an option">
	<option value=""></option>
	<option value=1>1 (Strongly Agree)</option>
	<option value=2>2</option>
	<option value=3>3</option>
	<option value=4>4</option>
	<option value=5>5 (Strongly Disagree)</option>
</select>
<br>
<br>
<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>
</form>
<br>
<br>
<footer>
	<div class="container">
	<p>
		<a href="/api/friends">API Friends List</a>
	</p>
	</div>
</footer>
<div id="friendModal" class="modal fade" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
			<button type="button" class="close" data-dismiss="modal">X</button>
			<h2 class="modal-title">
				<b>Best Match</b>
			</h2>
		</div>
		<div class="modal-body">
			<h2 id="friendName"></h2>
			<img id="friendPhoto" width="15%" height="15%"></img>
		</div>
		<div class="modal-footer">
			<button type="button" class="btn btn-default" id="closeModal" data-dismiss="modal">Close</button>
		</div>
	</div>
</div>

<script type="text/javascript">

$("#submit").on("click", function(event){
	event.preventDefault();

	function validation(){
		var isValid = true;
		$('.form-control').each(function(){
			if($(this).val() === '')
				isValid = false;
		});
		$('.chosen-select').each(function(){
			if($(this).val() === "")
				isValid = false;
		});
		return isValid;
	}

	if (validation() == true){
		var newFriendInfo = {
			friendName: $("#name").val().trim(),
			friendPhoto: $("#photo").val().trim(),
			scores: [parseInt($("#q1").val()),
		  			  parseInt($("#q2").val()),
		  			  parseInt($("#q3").val()),
		  			  parseInt($("#q4").val()),
		  			  parseInt($("#q5").val()),
		  			  parseInt($("#q6").val()),
		  			  parseInt($("#q7").val()),
		  			  parseInt($("#q8").val()),
		  			  parseInt($("#q9").val()),
		  			  parseInt($("#q10").val()),
		  			  ]};

		//var currentSite = window.location.origin;

		$.post("/api/friends", newFriendInfo, function(data){
			//console.log("This data: " + data);
			$("#friendName").html(data.name);
			$('#friendPhoto').attr("src", data.photo);

			$("#friendModal").modal('toggle');
			//resetForm($("#friendform"));
		});
	}else{
		alert("Please fill out the entire survey before submitting!");
	}
	return false;
});

// function resetForm($form) {
//     $form.find('input:text, input:url, chosen-select').val('');
// };

</script>



</body>
</html>
